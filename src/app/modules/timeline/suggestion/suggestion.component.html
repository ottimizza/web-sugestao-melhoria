<div class="card p-2">

  <div class="row w-100 m-0">
    <div class="col-2 p-0">
      <!-- Substituir pela imagem oficial -->
      <img src="../../../../assets/icons/icon-72x72.png">
    </div>
    <div class="col p-0 pl-2 text-left">
      <span class="name">{{ suggestion.usuario }}</span>
      <span class="hour">{{ getDate(suggestion.dataCriacao) }}</span>
    </div>
  </div>

  <div class="useless class mt-3" *ngIf="!isSelected; else complete">
    <strong>{{ title }}</strong>
    <br>
    <span class="content">{{ content }}</span>
    <div class="m-3 mb-4 mt-4 text-left tags-area">
      <!-- <app-tag [tags]="suggestion.tags"></app-tag> -->
    </div>
  </div>

  <ng-template #complete>
    <div class="mt-3">

      <p>{{ suggestion.titulo }}</p>

      <div class="text-left mt-3">
        <strong>Problema a ser Resolvido:</strong>
        <br>
        <span>{{ suggestion.problemaResolvido }}</span>
        <br><br>

        <strong>Sugestão de Melhoria:</strong>
        <br>
        <span>{{ suggestion.descricaoSugestao }}</span>
        <br><br>

        <div class="ml-3">
          <!-- <strong *ngIf="suggestion.tags.length">Tags:</strong>
          <app-tag [tags]="suggestion.tags"></app-tag> -->
        </div>
      </div>

    </div>
  </ng-template>

  <a class="text-info cursor-pointer" (click)="isSelected = !isSelected">{{ button }}</a>

  <div class="comments-area p-4 text-center" *ngIf="visibleComments">

    <div class="comment-creator mt-5 mb-5 d-inline-block w-100">
      <strong class="float-left" [ngClass]="{ 'text-danger': error }">Deixe seu comentário</strong>
      <textarea placeholder="Escreva aqui" [(ngModel)]="ownComment" maxlength="140" [ngClass]="{ 'border-danger': error }"></textarea>
      <div class="row m-0 w-100">
        <div class="col p-0">
          <button class="btn btn-info float-left" (click)="submit()">Enviar</button>
        </div>
        <div class="col p-0">
          <span class="float-right">{{ ownComment.length }} / 140</span>
        </div>
      </div>
    </div>

    <div class="comment text-left" *ngFor="let com of comments">
      <strong>{{ com.usuario }}</strong>
      <br>
      <span>{{ com.texto }}</span>
      <br><br><br>
    </div>

    <button mat-button class="load-more m-auto text-center" (click)="nextPage()" *ngIf="pageInfo?.hasNext && !isFetching">Carregar mais</button>

  </div>

  <div class="row w-100 m-0 mb-3 mt-4 mobile">
    <div (click)="visibleComments = !visibleComments" class="comments cursor-pointer action-button" matTooltip="Ver comentários" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-comment-alt-lines mr-2"></i>{{ pageInfo ? pageInfo.totalElements : suggestion.numeroComentarios }}</div>
    <div class="likes cursor-pointer action-button" (click)="openLikeDialog()" matTooltip="Marcar como gostei" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-heart mr-2"></i>{{ suggestion.numeroLikes }}</div>
    <div class="dislikes cursor-pointer action-button" (click)="openDisikeDialog()" matTooltip="Marcar como não gostei" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-heart-broken mr-2"></i>{{ suggestion.numeroDislikes }}</div>
  </div>

  <div class="row w-100 m-0 mb-3 mt-4 desktop">
    <div class="col-3"></div>
    <div class="col-6">
      <div (click)="visibleComments = !visibleComments" class="comments cursor-pointer action-button" matTooltip="Ver comentários" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-comment-alt-lines mr-2"></i>{{ pageInfo ? pageInfo.totalElements : suggestion.numeroComentarios }}</div>
      <div class="likes cursor-pointer action-button" (click)="openLikeDialog()" matTooltip="Marcar como gostei" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-heart mr-2"></i>{{ suggestion.numeroLikes }}</div>
      <div class="dislikes cursor-pointer action-button" (click)="openDisikeDialog()" matTooltip="Marcar como não gostei" matTooltipShowDelay="300" matTooltipHideDelay="500"><i class="fa fa-heart-broken mr-2"></i>{{ suggestion.numeroDislikes }}</div>
    </div>
    <div class="col-3"></div>
  </div>

</div>
